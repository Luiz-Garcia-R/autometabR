% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/MetabolCorr.R
\name{metabol.corr}
\alias{metabol.corr}
\title{Compute and visualize correlation between metabolites}
\usage{
metabol.corr(
  normalized_data,
  metadata = NULL,
  group_level = TRUE,
  method = "auto",
  plot = TRUE
)
}
\arguments{
\item{normalized_data}{A numeric matrix or a \code{metabolNorm} object containing normalized metabolite data.
Rows are samples, columns are metabolites. May include a 'Sample' column.}

\item{metadata}{Optional metadata \code{data.frame} containing at least 'Sample' and 'Group' columns for aggregation.}

\item{group_level}{Logical, default TRUE. If TRUE and metadata is provided, averages data by group before computing correlations.}

\item{method}{Correlation method: "pearson", "spearman", "kendall", or "auto" (default). "auto" selects based on normality.}

\item{plot}{Logical, default TRUE. Whether to plot a heatmap (and scatterplot if 2 metabolites).}
}
\value{
A correlation matrix.
}
\description{
Computes pairwise correlations between metabolites and optionally plots
a heatmap with correlation coefficients. Can also summarize by group.
}
\examples{
\dontrun{
# Minimal example
set.seed(123)

norm_data <- data.frame(
  Sample = paste0("S", 1:8),
  Met1   = rnorm(8, mean = 5, sd = 1),
  Met2   = rnorm(8, mean = 6, sd = 1.2),
  Met3   = rnorm(8, mean = 7, sd = 1.5),
  Met4   = rnorm(8, mean = 5.5, sd = 0.8),
  Met5   = rnorm(8, mean = 6.5, sd = 1.1)
)

# Example metadata
meta <- data.frame(
  Sample = paste0("S", 1:8),
  Group  = rep(c("A", "B"), each = 4)
)

correlation <- metabol.corr(norm_data, metadata = meta)
print(correlation)
}

}
\references{
Pearson, K. (1895). Note on regression and inheritance in the case of two parents.
\emph{Proceedings of the Royal Society of London}, \strong{58}, 240–242.
\url{doi:10.1098/rspl.1895.0041}

Xia, J., & Wishart, D. S. (2016). Using MetaboAnalyst 3.0 for comprehensive metabolomics data analysis.
\emph{Current Protocols in Bioinformatics}, \strong{55}(1), 14.10.1–14.10.91.
\url{doi:10.1002/cpbi.11}
}
